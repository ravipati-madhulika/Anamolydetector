{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saitharun/Desktop/project/log-analyzer/frontend/lib/api.ts"],"sourcesContent":["import axios from \"axios\";\n\nexport const api = axios.create({\n  baseURL: process.env.Next_public_url || \"http://localhost:8000\",\n});\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,MAAM,qMAAK,CAAC,MAAM,CAAC;IAC9B,SAAS,QAAQ,GAAG,CAAC,eAAe,IAAI;AAC1C"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saitharun/Desktop/project/log-analyzer/frontend/app/metrics/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { api } from \"@/lib/api\";\nimport {\n  BarChart, Bar, XAxis, YAxis, Tooltip, ResponsiveContainer,\n  PieChart, Pie, Cell,\n  LineChart, Line\n} from \"recharts\";\n\nconst COLORS = [\"#6366F1\", \"#F59E0B\", \"#EF4444\", \"#22C55E\"];\n\nexport default function MetricsPage() {\n  const [summary, setSummary] = useState<any>(null);\n  const [topErrors, setTopErrors] = useState<any[]>([]);\n  const [severityData, setSeverityData] = useState<any[]>([]);\n  const [trendData, setTrendData] = useState<any[]>([]);\n\n  useEffect(() => {\n    // SUMMARY\n    api.get(\"/metrics/summary\")\n      .then(res => setSummary(res.data))\n      .catch(console.error);\n\n    // TOP ERRORS (NORMALIZED)\n  api.get(\"/metrics/top-errors\")\n    .then(res => {\n      const raw = Array.isArray(res.data?.data)\n        ? res.data.data\n        : [];\n\n      setTopErrors(\n        raw.map((e: any) => ({\n          endpoint: e.endpoint ?? e.path ?? \"unknown\",\n          error_count: e.error_count ?? e.count ?? 0,\n        }))\n      );\n    });\n\n\n\n    // ANOMALIES â†’ SEVERITY + TREND\n    api.get(\"/anomalies\")\n      .then(res => {\n        const data = Array.isArray(res.data) ? res.data : [];\n\n        const sevCount: Record<string, number> = {\n          low: 0, medium: 0, high: 0, critical: 0,\n        };\n\n        data.forEach(a => {\n          const key = a.severity?.toLowerCase();\n          if (key in sevCount) sevCount[key]++;\n        });\n\n        setSeverityData(\n          Object.entries(sevCount).map(([name, value]) => ({ name, value }))\n        );\n\n        setTrendData(\n          data.slice(0, 20).map((_, i) => ({\n            time: `T${i + 1}`,\n            errors: Math.floor(Math.random() * 10) + 1,\n          }))\n        );\n      })\n      .catch(console.error);\n  }, []);\n\n  return (\n    <div>\n      <h1 className=\"text-2xl font-semibold mb-6\">Metrics & Analysis</h1>\n\n      {/* KPI */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-5 mb-8\">\n        <KPI title=\"Total Logs\" value={summary?.total_logs} color=\"indigo\" />\n        <KPI title=\"Errors\" value={summary?.error_count} color=\"red\" />\n        <KPI\n          title=\"Error Rate\"\n          value={`${((summary?.error_rate ?? 0) * 100).toFixed(1)}%`}\n          color=\"yellow\"\n        />\n        <KPI\n          title=\"Avg Response Time\"\n          value={summary?.avg_response_time ? `${summary.avg_response_time} ms` : \"--\"}\n          color=\"green\"\n        />\n      </div>\n\n      {/* Charts */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 text-blue-700\">\n        <ChartCard title=\"Errors by Severity\" >\n          {severityData.length === 0 ? (\n            <Empty />\n          ) : (\n            <ResponsiveContainer width=\"100%\" height={250}>\n              <BarChart data={severityData}>\n                <XAxis dataKey=\"name\" />\n                <YAxis />\n                <Tooltip />\n                <Bar dataKey=\"value\" fill=\"#EF4444\" radius={[6, 6, 0, 0]} />\n              </BarChart>\n            </ResponsiveContainer>\n          )}\n        </ChartCard>\n\n\n        <ChartCard title=\"Severity Distribution\">\n          <ResponsiveContainer width=\"100%\" height={250}>\n            <PieChart>\n              <Pie data={severityData} dataKey=\"value\" nameKey=\"name\" outerRadius={90}>\n                {severityData.map((_, i) => (\n                  <Cell key={i} fill={COLORS[i % COLORS.length]} />\n                ))}\n              </Pie>\n              <Tooltip />\n            </PieChart>\n          </ResponsiveContainer>\n        </ChartCard>\n\n        <ChartCard title=\"Error Trend\">\n          <ResponsiveContainer width=\"100%\" height={250}>\n            <LineChart data={trendData}>\n              <XAxis dataKey=\"time\" />\n              <YAxis />\n              <Tooltip />\n              <Line type=\"monotone\" dataKey=\"errors\" stroke=\"#EF4444\" strokeWidth={3} />\n            </LineChart>\n          </ResponsiveContainer>\n        </ChartCard>\n\n        <ChartCard title=\"Power BI (Coming Soon)\">\n          <Empty />\n        </ChartCard>\n      </div>\n    </div>\n  );\n}\n\nfunction KPI({ title, value, color }: any) {\n  const colors: any = {\n    indigo: \"text-indigo-600\",\n    red: \"text-red-500\",\n    yellow: \"text-yellow-500\",\n    green: \"text-green-500\",\n  };\n\n  return (\n    <div className=\"bg-white rounded-xl shadow-sm p-5\">\n      <div className=\"text-sm text-gray-500\">{title}</div>\n      <div className={`text-2xl font-bold mt-2 ${colors[color]}`}>\n        {value ?? \"--\"}\n      </div>\n    </div>\n  );\n}\n\nfunction ChartCard({ title, children }: any) {\n  return (\n    <div className=\"bg-white rounded-xl shadow-sm p-5\">\n      <h3 className=\"text-sm font-medium mb-4\">{title}</h3>\n      {children}\n    </div>\n  );\n}\n\nfunction Empty() {\n  return (\n    <div className=\"h-[250px] flex items-center justify-center text-gray-400 text-sm\">\n      No data available\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}